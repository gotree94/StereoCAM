# Module 01: ìŠ¤í…Œë ˆì˜¤ ë¹„ì „ ì´ë¡  ê¸°ì´ˆ

[![ë‚œì´ë„](https://img.shields.io/badge/ë‚œì´ë„-â­â­_ì´ˆê¸‰-brightgreen.svg)]()
[![ì˜ˆìƒì‹œê°„](https://img.shields.io/badge/ì˜ˆìƒì‹œê°„-8--12ì‹œê°„-blue.svg)]()
[![ì„ ìˆ˜ì§€ì‹](https://img.shields.io/badge/ì„ ìˆ˜ì§€ì‹-ì„ í˜•ëŒ€ìˆ˜_ê¸°ì´ˆ-orange.svg)]()

---

## ğŸ“‹ ëª¨ë“ˆ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í•™ìŠµ ëª©í‘œ** | ìŠ¤í…Œë ˆì˜¤ ë¹„ì „ì˜ ìˆ˜í•™ì  ì›ë¦¬ì™€ ê¸°í•˜í•™ì  ê°œë… ì™„ë²½ ì´í•´ |
| **í•µì‹¬ í‚¤ì›Œë“œ** | ì–‘ì•ˆ ì‹œì°¨, í•€í™€ ì¹´ë©”ë¼, ì—í”¼í´ë¼ ê¸°í•˜í•™, ì‹œì°¨-ê¹Šì´ ë³€í™˜ |
| **ì‚°ì¶œë¬¼** | ì´ë¡  ê°œë… ì‹œê°í™” Python ì½”ë“œ, í•™ìŠµ ë…¸íŠ¸ |

---

## ğŸ“š ëª©ì°¨

1. [ì¸ê°„ì˜ ì…ì²´ ì‹œê°](#1-ì¸ê°„ì˜-ì…ì²´-ì‹œê°)
2. [í•€í™€ ì¹´ë©”ë¼ ëª¨ë¸](#2-í•€í™€-ì¹´ë©”ë¼-ëª¨ë¸)
3. [ì¢Œí‘œê³„ì™€ ë³€í™˜](#3-ì¢Œí‘œê³„ì™€-ë³€í™˜)
4. [ì—í”¼í´ë¼ ê¸°í•˜í•™](#4-ì—í”¼í´ë¼-ê¸°í•˜í•™)
5. [ì‹œì°¨ì™€ ê¹Šì´ì˜ ê´€ê³„](#5-ì‹œì°¨ì™€-ê¹Šì´ì˜-ê´€ê³„)
6. [ìŠ¤í…Œë ˆì˜¤ ì •ë¥˜](#6-ìŠ¤í…Œë ˆì˜¤-ì •ë¥˜)
7. [ì‹¤ìŠµ ì½”ë“œ](#7-ì‹¤ìŠµ-ì½”ë“œ)
8. [í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸](#8-í•™ìŠµ-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## 1. ì¸ê°„ì˜ ì…ì²´ ì‹œê°

### 1.1 ì–‘ì•ˆ ì‹œì°¨ (Binocular Disparity)

ì¸ê°„ì˜ ë‘ ëˆˆì€ ì•½ **65mm** ê°„ê²©ìœ¼ë¡œ ë–¨ì–´ì ¸ ìˆì–´, ë™ì¼í•œ ë¬¼ì²´ë¥¼ ì„œë¡œ ë‹¤ë¥¸ ê°ë„ì—ì„œ ê´€ì°°í•©ë‹ˆë‹¤.

```
                    ë¬¼ì²´ (P)
                       â—
                      /|\
                     / | \
                    /  |  \
                   /   |   \
                  /    |    \
                 /     |     \
                ğŸ‘ï¸â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ğŸ‘ï¸
              ì™¼ìª½ ëˆˆ       ì˜¤ë¥¸ìª½ ëˆˆ
                   â† 65mm â†’
```

ë‡ŒëŠ” ë‘ ë§ë§‰ ì´ë¯¸ì§€ì˜ **ìœ„ì¹˜ ì°¨ì´(ì‹œì°¨)**ë¥¼ ë¶„ì„í•˜ì—¬ ë¬¼ì²´ê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ì¸ì‹í•©ë‹ˆë‹¤.

### 1.2 ê¹Šì´ ì¸ì‹ ë©”ì»¤ë‹ˆì¦˜

| ë¬¼ì²´ ê±°ë¦¬ | ì‹œì°¨ í¬ê¸° | ëˆˆì˜ ìƒíƒœ | ì…ì²´ê° |
|----------|----------|----------|--------|
| ë§¤ìš° ê°€ê¹Œì›€ (< 30cm) | ë§¤ìš° í¼ | ëˆˆì´ ë§ì´ ëª¨ì„ (ìˆ˜ë ´) | ê°•í•¨ |
| ì¤‘ê°„ ê±°ë¦¬ (1-3m) | ì¤‘ê°„ | ì ë‹¹íˆ ëª¨ì„ | ëª…í™• |
| ë¨¼ ê±°ë¦¬ (> 10m) | ê±°ì˜ 0 | ê±°ì˜ í‰í–‰ | ì•½í•¨ |

> ğŸ’¡ **í•µì‹¬ ì›ë¦¬**: ì‹œì°¨(Disparity)ê°€ í´ìˆ˜ë¡ ë¬¼ì²´ê°€ ê°€ê¹ê³ , ì‘ì„ìˆ˜ë¡ ë©€ë‹¤.

### 1.3 ìŠ¤í…Œë ˆì˜¤ ì¹´ë©”ë¼ì™€ì˜ ë¹„êµ

| íŠ¹ì„± | ì¸ê°„ì˜ ëˆˆ | USB ì›¹ìº  ìŠ¤í…Œë ˆì˜¤ (ë³¸ êµìœ¡) |
|------|----------|---------------------------|
| ë² ì´ìŠ¤ë¼ì¸ | ~65mm | 85mm+ (ì¡°ì • ê°€ëŠ¥) |
| í•´ìƒë„ | ~576 ë©”ê°€í”½ì…€ (ì¶”ì •) | 2.07 MP (1920Ã—1080) |
| ì‹œì•¼ê° | ~120Â° (ì£¼ë³€ë¶€ í¬í•¨) | 72Â° |
| í”„ë ˆì„ë ˆì´íŠ¸ | ~60fps (ì¶”ì •) | 30fps |
| ì´ˆì  ì¡°ì ˆ | ìë™ (ìˆ˜ì •ì²´) | ê³ ì • ì´ˆì  |
| ì²˜ë¦¬ ë°©ì‹ | ë‡Œì˜ ì‹œê° í”¼ì§ˆ | ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ |

---

## 2. í•€í™€ ì¹´ë©”ë¼ ëª¨ë¸

### 2.1 ì´ìƒì ì¸ í•€í™€ ì¹´ë©”ë¼

ì‹¤ì œ ë Œì¦ˆì˜ ë³µì¡í•œ ê´‘í•™ì„ ë‹¨ìˆœí™”í•œ ìˆ˜í•™ ëª¨ë¸ì…ë‹ˆë‹¤.

```
    3D ê³µê°„                           ì´ë¯¸ì§€ í‰ë©´
                                     
       P(X,Y,Z)                         p(u,v)
          â—                               â—
           \                             /
            \                           /
             \         í•€í™€            /
              \          â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€/
               \        / \          /
                \      /   \        /
                 \    /     \      /
                  \  /       \    /
                   \/         \  /
                   /\          \/
                  /  \         /\
                 /    \       /  \
                                   
            ì´ˆì ê±°ë¦¬ f
            â†â”€â”€â”€â”€â”€â”€â”€â†’
```

### 2.2 íˆ¬ì˜ ë°©ì •ì‹

3D ì  P(X, Y, Z)ê°€ ì´ë¯¸ì§€ í‰ë©´ì˜ ì  p(u, v)ë¡œ íˆ¬ì˜ë˜ëŠ” ê´€ê³„:

```
        u = f * (X / Z) + cx
        v = f * (Y / Z) + cy
```

ì—¬ê¸°ì„œ:
- `f`: ì´ˆì  ê±°ë¦¬ (focal length) - í”½ì…€ ë‹¨ìœ„
- `(cx, cy)`: ì£¼ì  (principal point) - ì´ë¯¸ì§€ ì¤‘ì‹¬
- `Z`: ë¬¼ì²´ê¹Œì§€ì˜ ê¹Šì´

### 2.3 ë™ì°¨ ì¢Œí‘œ í‘œí˜„

í–‰ë ¬ í˜•íƒœë¡œ í‘œí˜„í•˜ë©´:

```
        â”Œ u â”       â”Œ fx  0  cx â”   â”Œ X â”
    s * â”‚ v â”‚   =   â”‚  0  fy cy â”‚ * â”‚ Y â”‚
        â”” 1 â”˜       â””  0  0   1 â”˜   â”” Z â”˜
        
         p      =        K        *   P
```

**K**: ì¹´ë©”ë¼ ë‚´ë¶€ íŒŒë¼ë¯¸í„° í–‰ë ¬ (Camera Intrinsic Matrix)

### 2.4 ë Œì¦ˆ ì™œê³¡ (Lens Distortion)

ì‹¤ì œ ì¹´ë©”ë¼ëŠ” ì´ìƒì ì¸ í•€í™€ ëª¨ë¸ì—ì„œ ë²—ì–´ë‚©ë‹ˆë‹¤.

#### ë°©ì‚¬ ì™œê³¡ (Radial Distortion)

```
   ì›ë³¸              ë°°ëŸ´ ì™œê³¡          í•€ì¿ ì…˜ ì™œê³¡
   â”Œâ”€â”€â”€â”€â”            â•­â”€â”€â”€â”€â•®            â”Œâ”€â”€â”€â”€â”
   â”‚    â”‚            â”‚    â”‚            â•°    â•¯
   â”‚    â”‚            â”‚    â”‚            â”‚    â”‚
   â”‚    â”‚            â”‚    â”‚            â•­    â•®
   â””â”€â”€â”€â”€â”˜            â•°â”€â”€â”€â”€â•¯            â””â”€â”€â”€â”€â”˜
   
   (ì´ìƒì )          (ê´‘ê° ë Œì¦ˆ)        (ë§ì› ë Œì¦ˆ)
```

ë³´ì • ê³µì‹:
```
x_corrected = x * (1 + k1*rÂ² + k2*râ´ + k3*râ¶)
y_corrected = y * (1 + k1*rÂ² + k2*râ´ + k3*râ¶)

ì—¬ê¸°ì„œ rÂ² = xÂ² + yÂ²
```

#### ì ‘ì„  ì™œê³¡ (Tangential Distortion)

ë Œì¦ˆê°€ ì´ë¯¸ì§€ ì„¼ì„œì™€ ì™„ë²½íˆ í‰í–‰í•˜ì§€ ì•Šì„ ë•Œ ë°œìƒ:

```
x_corrected = x + [2*p1*x*y + p2*(rÂ² + 2*xÂ²)]
y_corrected = y + [p1*(rÂ² + 2*yÂ²) + 2*p2*x*y]
```

#### ì™œê³¡ ê³„ìˆ˜

```
ì™œê³¡ ê³„ìˆ˜ ë²¡í„°: D = [k1, k2, p1, p2, k3]

ì¼ë°˜ì ì¸ USB ì›¹ìº :
k1 â‰ˆ -0.1 ~ -0.3 (ë°°ëŸ´ ì™œê³¡)
k2 â‰ˆ 0.01 ~ 0.1
p1, p2 â‰ˆ Â±0.001 (ì‘ì€ ê°’)
k3 â‰ˆ 0 (ë³´í†µ ë¬´ì‹œ)
```

---

## 3. ì¢Œí‘œê³„ì™€ ë³€í™˜

### 3.1 ì¢Œí‘œê³„ ì¢…ë¥˜

ìŠ¤í…Œë ˆì˜¤ ë¹„ì „ì—ì„œ ì‚¬ìš©í•˜ëŠ” 3ê°€ì§€ ì¢Œí‘œê³„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ì›”ë“œ ì¢Œí‘œê³„ (World)     ì¹´ë©”ë¼ ì¢Œí‘œê³„ (Camera)    ì´ë¯¸ì§€ ì¢Œí‘œê³„ â”‚
â”‚                                                             â”‚
â”‚        Zwâ†‘                    Zcâ†‘                          â”‚
â”‚         â”‚                     â”‚  (ê´‘ì¶•)              vâ†“     â”‚
â”‚         â”‚                     â”‚                      â”‚      â”‚
â”‚         â””â”€â”€â”€â”€â†’Xw              â””â”€â”€â”€â”€â†’Xc           â”€â”€â”€â”¼â”€â”€â”€â†’u â”‚
â”‚        /                     /                       â”‚      â”‚
â”‚       Ywâ†™                   Ycâ†™                    (í”½ì…€)   â”‚
â”‚                                                             â”‚
â”‚   (ê³ ì • ê¸°ì¤€ì )           (ì¹´ë©”ë¼ ì¤‘ì‹¬)           (2D ì´ë¯¸ì§€) â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì¢Œí‘œ ë³€í™˜ íŒŒì´í”„ë¼ì¸

```
    ì›”ë“œ ì¢Œí‘œê³„          ì¹´ë©”ë¼ ì¢Œí‘œê³„         ì´ë¯¸ì§€ ì¢Œí‘œê³„
    
    Pw(Xw,Yw,Zw)   â”€â”€â†’   Pc(Xc,Yc,Zc)   â”€â”€â†’   p(u,v)
    
                   [R|t]              K
               (ì™¸ë¶€ íŒŒë¼ë¯¸í„°)    (ë‚´ë¶€ íŒŒë¼ë¯¸í„°)
```

#### ì™¸ë¶€ íŒŒë¼ë¯¸í„° (Extrinsic Parameters)

ì¹´ë©”ë¼ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ì„ ë‚˜íƒ€ëƒ„:

```
â”Œ Xc â”       â”Œ         â”   â”Œ Xw â”   â”Œ    â”
â”‚ Yc â”‚   =   â”‚    R    â”‚ * â”‚ Yw â”‚ + â”‚  t â”‚
â”” Zc â”˜       â””         â”˜   â”” Zw â”˜   â””    â”˜

R: 3Ã—3 íšŒì „ í–‰ë ¬ (Rotation Matrix)
t: 3Ã—1 ë³‘ì§„ ë²¡í„° (Translation Vector)
```

#### ì™„ì „í•œ íˆ¬ì˜ í–‰ë ¬

```
        â”Œ u â”           â”Œ         â”   â”Œ Xw â”
    s * â”‚ v â”‚   =   K * â”‚  R | t  â”‚ * â”‚ Yw â”‚
        â”” 1 â”˜           â””         â”˜   â”‚ Zw â”‚
                                      â””  1 â”˜

            =       P (3Ã—4 íˆ¬ì˜ í–‰ë ¬)
```

---

## 4. ì—í”¼í´ë¼ ê¸°í•˜í•™

### 4.1 í•µì‹¬ ê°œë…

ì—í”¼í´ë¼ ê¸°í•˜í•™ì€ ë‘ ì¹´ë©”ë¼ ê°„ì˜ ê¸°í•˜í•™ì  ê´€ê³„ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

```
                         3D ì  P
                            â—
                           /|\
                          / | \
                         /  |  \
                        /   |   \
                       /    |    \
                      /     |     \
                 pL â—â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â— pR
                    â”‚       â”‚       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â”‚   ì—í”¼í´ë¼ í‰ë©´  â”‚       â”‚
            â”‚   â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€   â”‚
            â”‚      eL             eR        â”‚
            â”‚   (ì—í”¼í´)       (ì—í”¼í´)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              ì™¼ìª½ ì´ë¯¸ì§€      ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€
                    â†â”€â”€ ë² ì´ìŠ¤ë¼ì¸ â”€â”€â†’
```

### 4.2 ì£¼ìš” ìš©ì–´

| ìš©ì–´ | ì •ì˜ | ì˜ë¯¸ |
|------|------|------|
| **ì—í”¼í´ (Epipole)** | í•œ ì¹´ë©”ë¼ì˜ ì¤‘ì‹¬ì´ ë‹¤ë¥¸ ì¹´ë©”ë¼ ì´ë¯¸ì§€ì— íˆ¬ì˜ëœ ì  | eL, eR |
| **ì—í”¼í´ë¼ í‰ë©´ (Epipolar Plane)** | P, OL, ORì„ í¬í•¨í•˜ëŠ” í‰ë©´ | 3D ê¸°í•˜ ì œì•½ |
| **ì—í”¼í´ë¼ ë¼ì¸ (Epipolar Line)** | ì—í”¼í´ë¼ í‰ë©´ê³¼ ì´ë¯¸ì§€ í‰ë©´ì˜ êµì„  | ëŒ€ì‘ì  ê²€ìƒ‰ ë²”ìœ„ |

### 4.3 ì—í”¼í´ë¼ ì œì•½ (Epipolar Constraint)

```
ì™¼ìª½ ì´ë¯¸ì§€ì˜ ì  pLì´ ì£¼ì–´ì§€ë©´,
ëŒ€ì‘ì  pRì€ ë°˜ë“œì‹œ ì—í”¼í´ë¼ ë¼ì¸ ìœ„ì— ì¡´ì¬í•œë‹¤!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚        â”‚                 â”‚
â”‚       â— pL      â”‚        â”‚  â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                 â”‚   â†’    â”‚      pR        â”‚
â”‚                 â”‚        â”‚   ì—í”¼í´ë¼ ë¼ì¸   â”‚
â”‚                 â”‚        â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ì™¼ìª½ ì´ë¯¸ì§€                 ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€

ê²€ìƒ‰ ë²”ìœ„: 2D ì „ì²´ â†’ 1D ë¼ì¸ìœ¼ë¡œ ì¶•ì†Œ!
ê³„ì‚°ëŸ‰ ê°ì†Œ: O(nÂ²) â†’ O(n)
```

### 4.4 ê¸°ë³¸ í–‰ë ¬ (Fundamental Matrix)

ê¸°ë³¸ í–‰ë ¬ FëŠ” ë‘ ì´ë¯¸ì§€ ê°„ì˜ ì—í”¼í´ë¼ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 3Ã—3 í–‰ë ¬:

```
pR^T * F * pL = 0

ì—¬ê¸°ì„œ:
- pL = [uL, vL, 1]^T  (ì™¼ìª½ ì´ë¯¸ì§€ ì , ë™ì°¨ ì¢Œí‘œ)
- pR = [uR, vR, 1]^T  (ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€ ì , ë™ì°¨ ì¢Œí‘œ)
- F: 3Ã—3 ê¸°ë³¸ í–‰ë ¬ (rank = 2)
```

ì—í”¼í´ë¼ ë¼ì¸ ê³„ì‚°:
```
lR = F * pL      (ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€ì˜ ì—í”¼í´ë¼ ë¼ì¸)
lL = F^T * pR    (ì™¼ìª½ ì´ë¯¸ì§€ì˜ ì—í”¼í´ë¼ ë¼ì¸)
```

### 4.5 ë³¸ì§ˆ í–‰ë ¬ (Essential Matrix)

ë³¸ì§ˆ í–‰ë ¬ EëŠ” ì •ê·œí™”ëœ ì¹´ë©”ë¼ ì¢Œí‘œì—ì„œì˜ ì—í”¼í´ë¼ ê´€ê³„:

```
E = K_R^T * F * K_L

ë˜ëŠ”

E = [t]Ã— * R

ì—¬ê¸°ì„œ:
[t]Ã— = â”Œ  0  -t3   t2 â”
       â”‚  t3   0  -t1 â”‚   (tì˜ ë°˜ëŒ€ì¹­ í–‰ë ¬)
       â”” -t2  t1   0  â”˜
```

| íŠ¹ì„± | ê¸°ë³¸ í–‰ë ¬ F | ë³¸ì§ˆ í–‰ë ¬ E |
|------|-----------|-----------|
| ì¢Œí‘œê³„ | í”½ì…€ ì¢Œí‘œ | ì •ê·œí™” ì¹´ë©”ë¼ ì¢Œí‘œ |
| ìº˜ë¦¬ë¸Œë ˆì´ì…˜ | ë¶ˆí•„ìš” | í•„ìš” (K ì•Œì•„ì•¼ í•¨) |
| ììœ ë„ | 7 | 5 |
| ë¶„í•´ | R, t ì§ì ‘ ì¶”ì¶œ ë¶ˆê°€ | R, t ì¶”ì¶œ ê°€ëŠ¥ |

---

## 5. ì‹œì°¨ì™€ ê¹Šì´ì˜ ê´€ê³„

### 5.1 ì´ìƒì ì¸ ìŠ¤í…Œë ˆì˜¤ ë°°ì¹˜

ë‘ ì¹´ë©”ë¼ê°€ ì™„ë²½íˆ í‰í–‰í•˜ê²Œ ì •ë ¬ëœ ê²½ìš°:

```
                        P(X, Y, Z)
                             â—
                            /|\
                           / | \
                          /  |  \
                         /   |   \
                        /    |    \
                       /     |Z    \
                      /      |      \
                     /       |       \
              â—â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â—
              OL    â”‚   B    â”‚        â”‚    OR
                    â”‚â†â”€â”€â”€â”€â”€â”€â†’â”‚        â”‚
                    xL       0       xR
                    
            â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë² ì´ìŠ¤ë¼ì¸ B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
```

### 5.2 í•µì‹¬ ê³µì‹ ìœ ë„

ì‚¼ê°í˜• ë‹®ìŒì„ ì´ìš©í•œ ìœ ë„:

```
ì™¼ìª½ ì¹´ë©”ë¼:    xL / f = X / Z
ì˜¤ë¥¸ìª½ ì¹´ë©”ë¼:  xR / f = (X - B) / Z

ì‹œì°¨ ì •ì˜:     d = xL - xR

ëŒ€ì…í•˜ë©´:
d = f * (X/Z) - f * ((X-B)/Z)
d = f * (X - X + B) / Z
d = f * B / Z

ë”°ë¼ì„œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚         Z = (f Ã— B) / d         â”‚
â”‚                                 â”‚
â”‚  Z: ê¹Šì´ (mm)                   â”‚
â”‚  f: ì´ˆì ê±°ë¦¬ (í”½ì…€)              â”‚
â”‚  B: ë² ì´ìŠ¤ë¼ì¸ (mm)              â”‚
â”‚  d: ì‹œì°¨ (í”½ì…€)                  â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 USB ì›¹ìº  ìŠ¤í™ ì ìš© ì˜ˆì‹œ

```
ì¹´ë©”ë¼ ìŠ¤í™:
- í•´ìƒë„: 1920 Ã— 1080
- ì„¼ì„œ í¬ê¸°: 1/4" (ëŒ€ëµ 3.6mm Ã— 2.7mm)
- ìˆ˜í‰ FOV: 72Â°

ì´ˆì ê±°ë¦¬ ê³„ì‚°:
f_mm = (sensor_width / 2) / tan(FOV / 2)
f_mm = (3.6 / 2) / tan(36Â°) â‰ˆ 2.47mm

í”½ì…€ ë‹¨ìœ„ ë³€í™˜:
f_pixel = f_mm Ã— (image_width / sensor_width)
f_pixel = 2.47 Ã— (1920 / 3.6) â‰ˆ 1317 í”½ì…€
```

### 5.4 ê±°ë¦¬ë³„ ì‹œì°¨ ë° ì •ë°€ë„ ë¶„ì„

ë² ì´ìŠ¤ë¼ì¸ B = 85mm, ì´ˆì ê±°ë¦¬ f = 1317 í”½ì…€ ê¸°ì¤€:

| ê±°ë¦¬ Z (m) | ì‹œì°¨ d (í”½ì…€) | ì‹œì°¨ ë³€í™”ìœ¨ | ê¹Šì´ ë¶„í•´ëŠ¥ (cm) |
|-----------|--------------|------------|-----------------|
| 0.3 | 373.1 | - | 0.08 |
| 0.5 | 223.9 | ë†’ìŒ | 0.22 |
| 1.0 | 111.9 | ì¤‘ê°„ | 0.89 |
| 2.0 | 56.0 | ë‚®ìŒ | 3.57 |
| 3.0 | 37.3 | ë‚®ìŒ | 8.04 |
| 5.0 | 22.4 | ë§¤ìš° ë‚®ìŒ | 22.3 |

> ğŸ’¡ **ê¹Šì´ ë¶„í•´ëŠ¥**: ì‹œì°¨ê°€ 1í”½ì…€ ë³€í•  ë•Œì˜ ê¹Šì´ ë³€í™”ëŸ‰
> `Î”Z = ZÂ² / (f Ã— B)`

### 5.5 ë² ì´ìŠ¤ë¼ì¸ ì˜í–¥ ë¶„ì„

```
ë² ì´ìŠ¤ë¼ì¸ì´ í´ìˆ˜ë¡:
âœ… ì›ê±°ë¦¬ ì •ë°€ë„ í–¥ìƒ (ì‹œì°¨ê°€ ì»¤ì§)
âŒ ê·¼ê±°ë¦¬ ì‹œì•¼ ê²¹ì¹¨ ê°ì†Œ (ë¸”ë¼ì¸ë“œ ì˜ì—­ ë°œìƒ)
âŒ ë¬¼ë¦¬ì  í¬ê¸° ì¦ê°€

ë² ì´ìŠ¤ë¼ì¸ì´ ì‘ì„ìˆ˜ë¡:
âœ… ê·¼ê±°ë¦¬ ì¸¡ì • ì•ˆì •ì 
âŒ ì›ê±°ë¦¬ ì •ë°€ë„ ì €í•˜
âœ… ì»´íŒ©íŠ¸í•œ ì‹œìŠ¤í…œ
```

| ìš©ë„ | ê¶Œì¥ ë² ì´ìŠ¤ë¼ì¸ | ì´ìœ  |
|------|---------------|------|
| ì–¼êµ´ ì¸ì‹ | 30-50mm | ê·¼ê±°ë¦¬, ì‘ì€ ì‹œìŠ¤í…œ |
| ë¡œë´‡ ì²­ì†Œê¸° | 80-120mm | ì‹¤ë‚´ í™˜ê²½ ìµœì í™” |
| ììœ¨ì£¼í–‰ | 200-400mm | ì›ê±°ë¦¬ ì •ë°€ë„ í•„ìš” |
| ë“œë¡  | 100-200mm | ê²½ëŸ‰í™”ì™€ ì„±ëŠ¥ ê· í˜• |

---

## 6. ìŠ¤í…Œë ˆì˜¤ ì •ë¥˜

### 6.1 ì •ë¥˜ì˜ í•„ìš”ì„±

ì‹¤ì œ ìŠ¤í…Œë ˆì˜¤ ì¹´ë©”ë¼ëŠ” ì™„ë²½íˆ ì •ë ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤:

```
ì •ë¥˜ ì „ (ì‹¤ì œ)                    ì •ë¥˜ í›„ (ì´ìƒì )
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    â—             â”‚             â”‚    â—             â”‚
â”‚     \            â”‚             â”‚                  â”‚
â”‚      \  ê¸°ìš¸ì–´ì§„  â”‚      â†’      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚       \ ì—í”¼í´ë¼  â”‚             â”‚    ìˆ˜í‰ ì—í”¼í´ë¼   â”‚
â”‚        \  ë¼ì¸   â”‚             â”‚        ë¼ì¸       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²€ìƒ‰: 2D ì˜ì—­ í•„ìš”              ê²€ìƒ‰: ê°™ì€ í–‰(1D)ë§Œ!
```

### 6.2 ì •ë¥˜ ë³€í™˜

OpenCVì˜ `stereoRectify()` í•¨ìˆ˜ê°€ ê³„ì‚°í•˜ëŠ” ê²ƒë“¤:

```python
R1, R2, P1, P2, Q, roi1, roi2 = cv2.stereoRectify(
    K1, D1,           # ì™¼ìª½ ì¹´ë©”ë¼ ë‚´ë¶€ íŒŒë¼ë¯¸í„°
    K2, D2,           # ì˜¤ë¥¸ìª½ ì¹´ë©”ë¼ ë‚´ë¶€ íŒŒë¼ë¯¸í„°  
    image_size,       # ì´ë¯¸ì§€ í¬ê¸°
    R, T,             # ìŠ¤í…Œë ˆì˜¤ ì™¸ë¶€ íŒŒë¼ë¯¸í„°
    flags=cv2.CALIB_ZERO_DISPARITY,
    alpha=0           # 0: ìœ íš¨ í”½ì…€ë§Œ, 1: ëª¨ë“  í”½ì…€
)
```

ì¶œë ¥ í–‰ë ¬ ì„¤ëª…:

| ì¶œë ¥ | í¬ê¸° | ì„¤ëª… |
|------|------|------|
| R1 | 3Ã—3 | ì™¼ìª½ ì¹´ë©”ë¼ ì •ë¥˜ íšŒì „ í–‰ë ¬ |
| R2 | 3Ã—3 | ì˜¤ë¥¸ìª½ ì¹´ë©”ë¼ ì •ë¥˜ íšŒì „ í–‰ë ¬ |
| P1 | 3Ã—4 | ì™¼ìª½ ì¹´ë©”ë¼ ì •ë¥˜ íˆ¬ì˜ í–‰ë ¬ |
| P2 | 3Ã—4 | ì˜¤ë¥¸ìª½ ì¹´ë©”ë¼ ì •ë¥˜ íˆ¬ì˜ í–‰ë ¬ |
| Q | 4Ã—4 | ì‹œì°¨-ê¹Šì´ ë§¤í•‘ í–‰ë ¬ (3D ë³µì›ìš©) |
| roi1, roi2 | - | ìœ íš¨ ì˜ì—­ ì‚¬ê°í˜• |

### 6.3 ì •ë¥˜ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   ì›ë³¸ ì™¼ìª½ ì´ë¯¸ì§€              ì›ë³¸ ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€            â”‚
â”‚        â†“                             â†“                     â”‚
â”‚   ì™œê³¡ ë³´ì • (undistort)          ì™œê³¡ ë³´ì • (undistort)       â”‚
â”‚        â†“                             â†“                     â”‚
â”‚   ì •ë¥˜ ë³€í™˜ (remap with R1)     ì •ë¥˜ ë³€í™˜ (remap with R2)   â”‚
â”‚        â†“                             â†“                     â”‚
â”‚   ì •ë¥˜ëœ ì™¼ìª½ ì´ë¯¸ì§€             ì •ë¥˜ëœ ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€          â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚   â”‚  ì—í”¼í´ë¼ ë¼ì¸ì´ ìˆ˜í‰ìœ¼ë¡œ ì •ë ¬ë¨!                       â”‚  â”‚
â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 Q í–‰ë ¬ì˜ êµ¬ì¡°

Q í–‰ë ¬ì„ ì´ìš©í•œ 3D ë³µì›:

```
        â”Œ X â”       â”Œ 1  0  0   -cx  â”   â”Œ u â”
        â”‚ Y â”‚       â”‚ 0  1  0   -cy  â”‚   â”‚ v â”‚
    W * â”‚ Z â”‚   =   â”‚ 0  0  0    f   â”‚ * â”‚ d â”‚
        â”‚ W â”‚       â”‚ 0  0  -1/B  0  â”‚   â”‚ 1 â”‚

3D ì¢Œí‘œ:
X = (u - cx) * Z / f
Y = (v - cy) * Z / f  
Z = f * B / d
```

---

## 7. ì‹¤ìŠµ ì½”ë“œ

### 7.1 í•€í™€ ì¹´ë©”ë¼ íˆ¬ì˜ ì‹œê°í™”

```python
"""
theory_visualization.py
í•€í™€ ì¹´ë©”ë¼ ëª¨ë¸ê³¼ íˆ¬ì˜ ì‹œê°í™”
"""

import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D


def visualize_pinhole_projection():
    """í•€í™€ ì¹´ë©”ë¼ íˆ¬ì˜ ì›ë¦¬ ì‹œê°í™”"""
    
    # ì¹´ë©”ë¼ íŒŒë¼ë¯¸í„°
    f = 500  # ì´ˆì ê±°ë¦¬ (í”½ì…€)
    cx, cy = 320, 240  # ì£¼ì 
    
    # 3D ì ë“¤ (ì •ìœ¡ë©´ì²´)
    cube_size = 100
    cube_center = np.array([0, 0, 500])  # ì¹´ë©”ë¼ ì• 500mm
    
    # ì •ìœ¡ë©´ì²´ ê¼­ì§“ì 
    vertices = np.array([
        [-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],
        [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1]
    ]) * cube_size / 2 + cube_center
    
    # íˆ¬ì˜
    def project(points_3d, f, cx, cy):
        """3D ì ì„ 2D ì´ë¯¸ì§€ë¡œ íˆ¬ì˜"""
        X, Y, Z = points_3d[:, 0], points_3d[:, 1], points_3d[:, 2]
        u = f * X / Z + cx
        v = f * Y / Z + cy
        return np.column_stack([u, v])
    
    projected = project(vertices, f, cx, cy)
    
    # ì‹œê°í™”
    fig = plt.figure(figsize=(14, 5))
    
    # 3D ë·°
    ax1 = fig.add_subplot(131, projection='3d')
    ax1.set_title('3D Scene', fontsize=12)
    
    # ì •ìœ¡ë©´ì²´ ê·¸ë¦¬ê¸°
    edges = [
        [0,1], [1,2], [2,3], [3,0],  # ì•ë©´
        [4,5], [5,6], [6,7], [7,4],  # ë’·ë©´
        [0,4], [1,5], [2,6], [3,7]   # ì—°ê²°
    ]
    
    for edge in edges:
        ax1.plot3D(*zip(vertices[edge[0]], vertices[edge[1]]), 'b-', linewidth=2)
    
    # ì¹´ë©”ë¼ ìœ„ì¹˜
    ax1.scatter([0], [0], [0], color='red', s=100, label='Camera')
    ax1.set_xlabel('X')
    ax1.set_ylabel('Y')
    ax1.set_zlabel('Z')
    ax1.legend()
    
    # 2D íˆ¬ì˜ ê²°ê³¼
    ax2 = fig.add_subplot(132)
    ax2.set_title('2D Projection', fontsize=12)
    
    for edge in edges:
        ax2.plot(*zip(projected[edge[0]], projected[edge[1]]), 'b-', linewidth=2)
    
    ax2.scatter(projected[:, 0], projected[:, 1], color='red', s=50)
    ax2.set_xlim(0, 640)
    ax2.set_ylim(480, 0)  # ì´ë¯¸ì§€ ì¢Œí‘œê³„ (y ë°˜ì „)
    ax2.set_xlabel('u (pixels)')
    ax2.set_ylabel('v (pixels)')
    ax2.set_aspect('equal')
    ax2.grid(True, alpha=0.3)
    
    # íˆ¬ì˜ ìˆ˜ì‹
    ax3 = fig.add_subplot(133)
    ax3.axis('off')
    ax3.set_title('Projection Equations', fontsize=12)
    
    equations = [
        r'$u = f \cdot \frac{X}{Z} + c_x$',
        r'$v = f \cdot \frac{Y}{Z} + c_y$',
        '',
        f'Parameters:',
        f'  f = {f} pixels',
        f'  (cx, cy) = ({cx}, {cy})',
        f'  Cube center Z = {cube_center[2]}mm'
    ]
    
    for i, eq in enumerate(equations):
        ax3.text(0.1, 0.9 - i*0.12, eq, fontsize=14, 
                transform=ax3.transAxes, family='monospace')
    
    plt.tight_layout()
    plt.savefig('pinhole_projection.png', dpi=150, bbox_inches='tight')
    plt.show()


def visualize_disparity_depth_relationship():
    """ì‹œì°¨-ê¹Šì´ ê´€ê³„ ì‹œê°í™”"""
    
    # íŒŒë¼ë¯¸í„°
    f = 1317  # ì´ˆì ê±°ë¦¬ (í”½ì…€) - USB ì›¹ìº  ì˜ˆìƒê°’
    B = 85    # ë² ì´ìŠ¤ë¼ì¸ (mm)
    
    # ê±°ë¦¬ ë²”ìœ„
    Z = np.linspace(300, 5000, 100)  # 0.3m ~ 5m
    
    # ì‹œì°¨ ê³„ì‚°
    d = f * B / Z
    
    # ê¹Šì´ ë¶„í•´ëŠ¥ (ì‹œì°¨ 1í”½ì…€ ë³€í™” ì‹œ)
    delta_Z = Z**2 / (f * B)
    
    fig, axes = plt.subplots(1, 3, figsize=(15, 4))
    
    # ì‹œì°¨ vs ê¹Šì´
    ax1 = axes[0]
    ax1.plot(Z/1000, d, 'b-', linewidth=2)
    ax1.set_xlabel('Depth Z (m)', fontsize=11)
    ax1.set_ylabel('Disparity d (pixels)', fontsize=11)
    ax1.set_title('Disparity vs Depth', fontsize=12)
    ax1.grid(True, alpha=0.3)
    ax1.axhline(y=1, color='r', linestyle='--', label='Min disparity (1 pixel)')
    ax1.legend()
    
    # ê¹Šì´ vs ì‹œì°¨ (ì—­ê´€ê³„)
    ax2 = axes[1]
    d_range = np.linspace(10, 400, 100)
    Z_from_d = f * B / d_range
    ax2.plot(d_range, Z_from_d/1000, 'g-', linewidth=2)
    ax2.set_xlabel('Disparity d (pixels)', fontsize=11)
    ax2.set_ylabel('Depth Z (m)', fontsize=11)
    ax2.set_title('Depth vs Disparity', fontsize=12)
    ax2.grid(True, alpha=0.3)
    
    # ê¹Šì´ ë¶„í•´ëŠ¥
    ax3 = axes[2]
    ax3.semilogy(Z/1000, delta_Z/10, 'r-', linewidth=2)
    ax3.set_xlabel('Depth Z (m)', fontsize=11)
    ax3.set_ylabel('Depth Resolution Î”Z (cm)', fontsize=11)
    ax3.set_title('Depth Resolution (per 1px disparity change)', fontsize=12)
    ax3.grid(True, alpha=0.3)
    
    plt.suptitle(f'Stereo Parameters: f={f}px, B={B}mm', fontsize=13, y=1.02)
    plt.tight_layout()
    plt.savefig('disparity_depth_analysis.png', dpi=150, bbox_inches='tight')
    plt.show()
    
    # ìˆ˜ì¹˜ í…Œì´ë¸” ì¶œë ¥
    print("\n" + "="*60)
    print("ê±°ë¦¬ë³„ ì‹œì°¨ ë° ê¹Šì´ ë¶„í•´ëŠ¥ (f={}px, B={}mm)".format(f, B))
    print("="*60)
    print(f"{'ê±°ë¦¬(m)':<10} {'ì‹œì°¨(px)':<12} {'ë¶„í•´ëŠ¥(cm)':<12}")
    print("-"*60)
    
    for z_m in [0.3, 0.5, 1.0, 2.0, 3.0, 5.0]:
        z_mm = z_m * 1000
        disp = f * B / z_mm
        resolution = (z_mm**2) / (f * B) / 10  # cmë¡œ ë³€í™˜
        print(f"{z_m:<10.1f} {disp:<12.1f} {resolution:<12.2f}")


def visualize_epipolar_geometry():
    """ì—í”¼í´ë¼ ê¸°í•˜í•™ ì‹œê°í™”"""
    
    fig, axes = plt.subplots(1, 2, figsize=(14, 5))
    
    # ì™¼ìª½ ì´ë¯¸ì§€
    ax1 = axes[0]
    ax1.set_xlim(0, 640)
    ax1.set_ylim(480, 0)
    ax1.set_title('Left Image', fontsize=12)
    ax1.set_xlabel('u')
    ax1.set_ylabel('v')
    
    # ì  pL í‘œì‹œ
    pL = np.array([200, 200])
    ax1.scatter(*pL, color='red', s=100, zorder=5, label='Point pL')
    
    # ì—í”¼í´ (ì˜¤ë¥¸ìª½ ì¹´ë©”ë¼ ì¤‘ì‹¬ì˜ íˆ¬ì˜)
    eL = np.array([640, 240])  # ì˜¤ë¥¸ìª½ ë (ì´ìƒì ì¸ ê²½ìš°)
    ax1.scatter(*eL, color='blue', s=100, marker='x', zorder=5, label='Epipole eL')
    
    # ì—í”¼í´ë¼ ë¼ì¸
    ax1.plot([0, 640], [200, 200], 'g--', linewidth=2, alpha=0.7, label='Epipolar line')
    ax1.legend(loc='lower right')
    ax1.grid(True, alpha=0.3)
    
    # ì˜¤ë¥¸ìª½ ì´ë¯¸ì§€
    ax2 = axes[1]
    ax2.set_xlim(0, 640)
    ax2.set_ylim(480, 0)
    ax2.set_title('Right Image', fontsize=12)
    ax2.set_xlabel('u')
    ax2.set_ylabel('v')
    
    # ì—í”¼í´ë¼ ë¼ì¸ (ìˆ˜í‰)
    ax2.plot([0, 640], [200, 200], 'g-', linewidth=3, label='Epipolar line (search here!)')
    
    # ê°€ëŠ¥í•œ ëŒ€ì‘ì ë“¤
    possible_pR = [(150, 200), (250, 200), (350, 200)]
    for i, p in enumerate(possible_pR):
        ax2.scatter(*p, color='orange', s=80, alpha=0.7)
    
    # ì‹¤ì œ ëŒ€ì‘ì 
    pR = np.array([150, 200])
    ax2.scatter(*pR, color='red', s=100, zorder=5, label='Matching point pR')
    
    # ì—í”¼í´
    eR = np.array([0, 240])
    ax2.scatter(*eR, color='blue', s=100, marker='x', zorder=5, label='Epipole eR')
    
    ax2.legend(loc='lower right')
    ax2.grid(True, alpha=0.3)
    
    # ì‹œì°¨ í‘œì‹œ
    disparity = pL[0] - pR[0]
    ax2.annotate(f'Disparity = {disparity} pixels', 
                xy=(200, 170), fontsize=12, color='purple',
                bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.8))
    
    plt.suptitle('Epipolar Geometry: Search Constraint', fontsize=13, y=1.02)
    plt.tight_layout()
    plt.savefig('epipolar_geometry.png', dpi=150, bbox_inches='tight')
    plt.show()


def visualize_baseline_effect():
    """ë² ì´ìŠ¤ë¼ì¸ì´ ì¸¡ì • ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥"""
    
    f = 1317  # ê³ ì • ì´ˆì ê±°ë¦¬
    baselines = [50, 85, 120, 200]  # mm
    Z = np.linspace(300, 5000, 100)
    
    fig, axes = plt.subplots(1, 2, figsize=(14, 5))
    
    # ì‹œì°¨ ë¹„êµ
    ax1 = axes[0]
    for B in baselines:
        d = f * B / Z
        ax1.plot(Z/1000, d, linewidth=2, label=f'B={B}mm')
    
    ax1.set_xlabel('Depth Z (m)', fontsize=11)
    ax1.set_ylabel('Disparity d (pixels)', fontsize=11)
    ax1.set_title('Disparity for Different Baselines', fontsize=12)
    ax1.axhline(y=5, color='gray', linestyle=':', label='Min reliable disparity')
    ax1.legend()
    ax1.grid(True, alpha=0.3)
    ax1.set_ylim(0, 400)
    
    # ê¹Šì´ ë¶„í•´ëŠ¥ ë¹„êµ
    ax2 = axes[1]
    for B in baselines:
        delta_Z = Z**2 / (f * B) / 10  # cm
        ax2.semilogy(Z/1000, delta_Z, linewidth=2, label=f'B={B}mm')
    
    ax2.set_xlabel('Depth Z (m)', fontsize=11)
    ax2.set_ylabel('Depth Resolution Î”Z (cm)', fontsize=11)
    ax2.set_title('Depth Resolution for Different Baselines', fontsize=12)
    ax2.axhline(y=5, color='gray', linestyle=':', label='5cm threshold')
    ax2.legend()
    ax2.grid(True, alpha=0.3)
    
    plt.suptitle('Effect of Baseline on Stereo Performance', fontsize=13, y=1.02)
    plt.tight_layout()
    plt.savefig('baseline_effect.png', dpi=150, bbox_inches='tight')
    plt.show()


if __name__ == "__main__":
    print("=" * 60)
    print("Module 01: ìŠ¤í…Œë ˆì˜¤ ë¹„ì „ ì´ë¡  ì‹œê°í™”")
    print("=" * 60)
    
    print("\n[1/4] í•€í™€ ì¹´ë©”ë¼ íˆ¬ì˜ ì‹œê°í™”...")
    visualize_pinhole_projection()
    
    print("\n[2/4] ì‹œì°¨-ê¹Šì´ ê´€ê³„ ë¶„ì„...")
    visualize_disparity_depth_relationship()
    
    print("\n[3/4] ì—í”¼í´ë¼ ê¸°í•˜í•™ ì‹œê°í™”...")
    visualize_epipolar_geometry()
    
    print("\n[4/4] ë² ì´ìŠ¤ë¼ì¸ ì˜í–¥ ë¶„ì„...")
    visualize_baseline_effect()
    
    print("\nâœ… ëª¨ë“  ì‹œê°í™” ì™„ë£Œ!")
    print("ìƒì„±ëœ íŒŒì¼:")
    print("  - pinhole_projection.png")
    print("  - disparity_depth_analysis.png")
    print("  - epipolar_geometry.png")
    print("  - baseline_effect.png")
```

---

## 8. í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ“ ì´ë¡  ì´í•´ë„ í™•ì¸

- [ ] ì–‘ì•ˆ ì‹œì°¨ê°€ ê¹Šì´ ì¸ì‹ì— ì–´ë–»ê²Œ ê¸°ì—¬í•˜ëŠ”ì§€ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] í•€í™€ ì¹´ë©”ë¼ ëª¨ë¸ì˜ íˆ¬ì˜ ë°©ì •ì‹ì„ ìœ ë„í•  ìˆ˜ ìˆë‹¤
- [ ] ë‚´ë¶€ íŒŒë¼ë¯¸í„°(K)ì™€ ì™¸ë¶€ íŒŒë¼ë¯¸í„°(R, t)ì˜ ì—­í• ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤
- [ ] ë°©ì‚¬ ì™œê³¡ê³¼ ì ‘ì„  ì™œê³¡ì˜ ì°¨ì´ë¥¼ ì´í•´í–ˆë‹¤
- [ ] ì—í”¼í´, ì—í”¼í´ë¼ ë¼ì¸, ì—í”¼í´ë¼ í‰ë©´ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ê¸°ë³¸ í–‰ë ¬(F)ê³¼ ë³¸ì§ˆ í–‰ë ¬(E)ì˜ ì°¨ì´ì ì„ ì•Œê³  ìˆë‹¤
- [ ] ì‹œì°¨-ê¹Šì´ ê³µì‹ `Z = fB/d`ë¥¼ ì´í•´í•˜ê³  ì ìš©í•  ìˆ˜ ìˆë‹¤
- [ ] ë² ì´ìŠ¤ë¼ì¸ì´ ê¹Šì´ ì¸¡ì • ì •ë°€ë„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ìŠ¤í…Œë ˆì˜¤ ì •ë¥˜ì˜ í•„ìš”ì„±ê³¼ ì›ë¦¬ë¥¼ ì´í•´í–ˆë‹¤

### ğŸ”¬ ì‹¤ìŠµ ì™„ë£Œ í™•ì¸

- [ ] `theory_visualization.py` ì½”ë“œ ì‹¤í–‰ ì™„ë£Œ
- [ ] í•€í™€ ì¹´ë©”ë¼ íˆ¬ì˜ ì‹œê°í™” ê²°ê³¼ í™•ì¸
- [ ] ì‹œì°¨-ê¹Šì´ ê´€ê³„ ê·¸ë˜í”„ ë¶„ì„
- [ ] ì—í”¼í´ë¼ ê¸°í•˜í•™ ì‹œê°í™” ì´í•´
- [ ] ë² ì´ìŠ¤ë¼ì¸ ì˜í–¥ ë¶„ì„ ê²°ê³¼ í™•ì¸

### ğŸ¯ ì—°ìŠµ ë¬¸ì œ

1. **ê³„ì‚° ë¬¸ì œ**: f=1000px, B=100mmì¼ ë•Œ, 2m ê±°ë¦¬ì˜ ë¬¼ì²´ì˜ ì‹œì°¨ëŠ”?
2. **ì‘ìš© ë¬¸ì œ**: ììœ¨ì£¼í–‰ ì°¨ëŸ‰ìš© ìŠ¤í…Œë ˆì˜¤ ì¹´ë©”ë¼ì˜ ìµœì  ë² ì´ìŠ¤ë¼ì¸ì€?
3. **ë¶„ì„ ë¬¸ì œ**: ì™œ ì—í”¼í´ë¼ ì œì•½ì´ ê³„ì‚°ëŸ‰ì„ O(nÂ²)ì—ì„œ O(n)ìœ¼ë¡œ ì¤„ì´ëŠ”ê°€?

---

## ğŸ“š ì°¸ê³  ìë£Œ

### í•„ìˆ˜ ì½ê¸°

1. **Multiple View Geometry in Computer Vision** - Hartley & Zisserman
   - Chapter 9: Epipolar Geometry and the Fundamental Matrix
   - Chapter 11: Computation of the Fundamental Matrix

2. **Learning OpenCV 3** - Bradski & Kaehler
   - Chapter 19: Stereo Imaging

### ì˜¨ë¼ì¸ ìë£Œ

- [OpenCV Camera Calibration Tutorial](https://docs.opencv.org/4.x/dc/dbb/tutorial_py_calibration.html)
- [First Principles of Computer Vision - Stereo](https://www.youtube.com/watch?v=hUVyDabn1Mg)

---

## â¡ï¸ ë‹¤ìŒ ëª¨ë“ˆ

**[Module 02: ì¹´ë©”ë¼ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì‹¤ìŠµ](../Module_02_Calibration/README.md)**

ë‹¤ìŒ ëª¨ë“ˆì—ì„œëŠ” ì‹¤ì œ USB ì›¹ìº  2ëŒ€ë¥¼ ì‚¬ìš©í•˜ì—¬:
- ì²´ìŠ¤ë³´ë“œ íŒ¨í„´ì„ ì´ìš©í•œ ì´ë¯¸ì§€ ìº¡ì²˜
- ë‹¨ì¼ ì¹´ë©”ë¼ ìº˜ë¦¬ë¸Œë ˆì´ì…˜
- ìŠ¤í…Œë ˆì˜¤ ìº˜ë¦¬ë¸Œë ˆì´ì…˜
- ì •ë¥˜ ë§µ ìƒì„± ë° ì ìš©

ì„ ì‹¤ìŠµí•©ë‹ˆë‹¤.

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥
